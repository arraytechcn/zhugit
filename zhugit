#!/bin/bash

# ZhuGit - æœ±æ°Gitæ“ä½œå·¥å…·
# ä½¿ç”¨æ–¹æ³•: zhugit [å‘½ä»¤] [å‚æ•°]

case "$1" in
    "init")
        echo "ğŸš€ åˆå§‹åŒ–Gitä»“åº“..."
        git init
        echo "âœ… Gitä»“åº“åˆå§‹åŒ–å®Œæˆï¼"
        echo "ğŸ’¡ æ¥ä¸‹æ¥å¯ä»¥ï¼š"
        echo "   zhugit add [æ–‡ä»¶]     - æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº"
        echo "   zhugit commit [ä¿¡æ¯]  - æäº¤æ›´æ”¹"
        echo "   zhugit status        - æŸ¥çœ‹çŠ¶æ€"
        ;;
    "new-project"|"new")
        if [ -z "$2" ]; then
            echo "âŒ è¯·æŒ‡å®šé¡¹ç›®åç§°"
            echo "ğŸ’¡ ä½¿ç”¨æ–¹æ³•: zhugit new-project <é¡¹ç›®åç§°>"
        else
            echo "ğŸš€ åˆ›å»ºæ–°é¡¹ç›®: $2"
            mkdir "$2"
            cd "$2"
            git init
            echo "# $2" > README.md
            git add .
            git commit -m "åˆå§‹æäº¤: $2"
            echo "âœ… æ–°é¡¹ç›® '$2' åˆ›å»ºå®Œæˆï¼"
            echo "ğŸ“ é¡¹ç›®ä½ç½®: $(pwd)"
            echo "ğŸ’¡ æ¥ä¸‹æ¥å¯ä»¥ï¼š"
            echo "   zhugit status        - æŸ¥çœ‹çŠ¶æ€"
            echo "   zhugit log          - æŸ¥çœ‹å†å²"
        fi
        ;;
    "connect-github"|"connect")
        if [ -z "$2" ]; then
            echo "âŒ è¯·æŒ‡å®šGitHubä»“åº“åœ°å€"
            echo "ğŸ’¡ ä½¿ç”¨æ–¹æ³•: zhugit connect-github <GitHubä»“åº“URL>"
            echo "ğŸ“‹ ç¤ºä¾‹: zhugit connect-github https://github.com/username/repo.git"
            echo ""
            echo "ğŸ¯ å®Œæ•´æµç¨‹ï¼š"
            echo "   1ï¸âƒ£  zhugit quick-setup é¡¹ç›®åç§°"
            echo "   2ï¸âƒ£  å» https://github.com/new åˆ›å»ºä»“åº“"
            echo "   3ï¸âƒ£  zhugit connect-github https://github.com/ç”¨æˆ·å/ä»“åº“å.git"
        else
            echo "ğŸ”— è¿æ¥åˆ°GitHubä»“åº“: $2"
            echo "ğŸ“‹ æ­¥éª¤1: æ£€æŸ¥å¹¶æ·»åŠ è¿œç¨‹ä»“åº“..."
            if git remote get-url origin >/dev/null 2>&1; then
                echo "âš ï¸  è¿œç¨‹ä»“åº“å·²å­˜åœ¨ï¼Œå°†æ›´æ–°URL"
                git remote set-url origin "$2"
            else
                git remote add origin "$2"
            fi
            
            # æ£€æŸ¥å½“å‰åˆ†æ”¯åç§°
            current_branch=$(git branch --show-current)
            if [ -z "$current_branch" ]; then
                current_branch="main"
                echo "ğŸ“‹ æ­¥éª¤2: åˆ›å»ºmainåˆ†æ”¯..."
                git checkout -b main
            fi
            
            echo "ğŸ“‹ æ­¥éª¤3: æ¨é€ä»£ç åˆ°GitHub..."
            echo "ğŸ“¡ æ¨é€åˆ†æ”¯: $current_branch"
            git push -u origin "$current_branch"
            echo "âœ… GitHubè¿æ¥å®Œæˆï¼"
            echo "ğŸ“¡ è¿œç¨‹ä»“åº“: $2"
            echo ""
            echo "ğŸ‰ é¡¹ç›®å·²æˆåŠŸä¸Šä¼ åˆ°GitHubï¼"
            echo "ğŸŒ æŸ¥çœ‹é¡¹ç›®: $2"
        fi
        ;;
    "quick-setup"|"setup")
        if [ -z "$2" ]; then
            echo "âŒ è¯·æŒ‡å®šé¡¹ç›®åç§°"
            echo "ğŸ’¡ ä½¿ç”¨æ–¹æ³•: zhugit quick-setup <é¡¹ç›®åç§°>"
            echo ""
            echo "ğŸ¯ è¶…çº§ç®€å•ç”¨æ³•ï¼š"
            echo "   zhugit quick-setup æˆ‘çš„é¡¹ç›®"
            echo "   # è„šæœ¬ä¼šè‡ªåŠ¨ï¼š"
            echo "   # 1ï¸âƒ£ åˆ›å»ºé¡¹ç›®ç›®å½•"
            echo "   # 2ï¸âƒ£ åˆå§‹åŒ–Git"
            echo "   # 3ï¸âƒ£ åˆ›å»ºREADME"
            echo "   # 4ï¸âƒ£ æäº¤åˆå§‹ç‰ˆæœ¬"
            echo "   # 5ï¸âƒ£ æç¤ºGitHubè¿æ¥"
        else
            echo "ğŸš€ è¶…çº§ç®€å•è®¾ç½®é¡¹ç›®: $2"
            echo ""
            
            # æ­¥éª¤1: åˆ›å»ºé¡¹ç›®ç›®å½•
            echo "ğŸ“‹ æ­¥éª¤1: åˆ›å»ºé¡¹ç›®ç›®å½•..."
            if [ -d "$2" ]; then
                echo "âš ï¸  ç›®å½•å·²å­˜åœ¨ï¼Œå°†ä½¿ç”¨ç°æœ‰ç›®å½•"
            else
                mkdir "$2"
            fi
            cd "$2"
            
            # æ­¥éª¤2: åˆå§‹åŒ–Gitä»“åº“
            echo "ğŸ“‹ æ­¥éª¤2: åˆå§‹åŒ–Gitä»“åº“..."
            if [ -d ".git" ]; then
                echo "âš ï¸  Gitä»“åº“å·²å­˜åœ¨ï¼Œå°†é‡æ–°åˆå§‹åŒ–"
                rm -rf .git
            fi
            git init
            
            # æ­¥éª¤3: åˆ›å»ºåŸºç¡€æ–‡ä»¶
            echo "ğŸ“‹ æ­¥éª¤3: åˆ›å»ºåŸºç¡€æ–‡ä»¶..."
            echo "# $2" > README.md
            echo "# é¡¹ç›®æè¿°" >> README.md
            echo "" >> README.md
            echo "## åŠŸèƒ½ç‰¹æ€§" >> README.md
            echo "- åŠŸèƒ½1" >> README.md
            echo "- åŠŸèƒ½2" >> README.md
            echo "" >> README.md
            echo "## ä½¿ç”¨æ–¹æ³•" >> README.md
            echo "1. å…‹éš†é¡¹ç›®" >> README.md
            echo "2. è¿è¡Œé¡¹ç›®" >> README.md
            
            # åˆ›å»º.gitignore
            echo "ğŸ“‹ æ­¥éª¤4: åˆ›å»º.gitignore..."
            cat > .gitignore << 'EOF'
# ç³»ç»Ÿæ–‡ä»¶
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# ç¼–è¾‘å™¨
.vscode/
.idea/
*.swp
*.swo
*~

# æ—¥å¿—æ–‡ä»¶
*.log
logs/

# ä¾èµ–ç›®å½•
node_modules/
vendor/

# æ„å»ºè¾“å‡º
build/
dist/
target/
EOF
            
            # æ­¥éª¤5: æ·»åŠ å¹¶æäº¤
            echo "ğŸ“‹ æ­¥éª¤5: æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº..."
            git add .
            echo "ğŸ“‹ æ­¥éª¤6: æäº¤åˆå§‹ç‰ˆæœ¬..."
            git commit -m "ğŸ‰ åˆå§‹æäº¤: $2"
            
            echo ""
            echo "âœ… é¡¹ç›® '$2' è®¾ç½®å®Œæˆï¼"
            echo "ğŸ“ é¡¹ç›®ä½ç½®: $(pwd)"
            echo ""
            echo "ğŸ¯ æ¥ä¸‹æ¥åªéœ€è¦ï¼š"
            echo "   1ï¸âƒ£  å» https://github.com/new åˆ›å»ºä»“åº“"
            echo "   2ï¸âƒ£  è¿è¡Œ: zhugit connect-github https://github.com/arraytechcn/$2.git"
            echo ""
            echo "ğŸ’¡ æˆ–è€…ä½¿ç”¨ä¸€é”®å‘½ä»¤ï¼š"
            echo "   zhugit auto-upload $2"
        fi
        ;;
    "auto-upload"|"upload")
        if [ -z "$2" ]; then
            echo "âŒ è¯·æŒ‡å®šé¡¹ç›®åç§°"
            echo "ğŸ’¡ ä½¿ç”¨æ–¹æ³•: zhugit auto-upload <é¡¹ç›®åç§°>"
            echo ""
            echo "ğŸ¯ ä¸€é”®ä¸Šä¼ åˆ°GitHubï¼š"
            echo "   zhugit auto-upload æˆ‘çš„é¡¹ç›®"
            echo "   # è„šæœ¬ä¼šè‡ªåŠ¨ï¼š"
            echo "   # 1ï¸âƒ£ åˆ›å»ºGitHubä»“åº“"
            echo "   # 2ï¸âƒ£ è¿æ¥è¿œç¨‹ä»“åº“"
            echo "   # 3ï¸âƒ£ æ¨é€ä»£ç "
            echo "   # 4ï¸âƒ£ æ˜¾ç¤ºé¡¹ç›®é“¾æ¥"
        else
            echo "ğŸš€ ä¸€é”®ä¸Šä¼ é¡¹ç›®åˆ°GitHub: $2"
            echo ""
            
            # æ£€æŸ¥æ˜¯å¦åœ¨é¡¹ç›®ç›®å½•ä¸­
            if [ ! -d ".git" ]; then
                echo "âŒ å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"
                echo "ğŸ’¡ è¯·å…ˆè¿è¡Œ: zhugit quick-setup $2"
                exit 1
            fi
            
            # æ£€æŸ¥æ˜¯å¦æœ‰æœªæäº¤çš„æ›´æ”¹
            if [ -n "$(git status --porcelain)" ]; then
                echo "ğŸ“‹ å‘ç°æœªæäº¤çš„æ›´æ”¹ï¼Œè‡ªåŠ¨æäº¤..."
                git add .
                git commit -m "ğŸ“ æ›´æ–°é¡¹ç›®æ–‡ä»¶"
            fi
            
            # è®¾ç½®GitHubä»“åº“URL
            repo_url="https://github.com/arraytechcn/$2.git"
            echo "ğŸ“‹ æ­¥éª¤1: è®¾ç½®GitHubä»“åº“..."
            if git remote get-url origin >/dev/null 2>&1; then
                echo "âš ï¸  è¿œç¨‹ä»“åº“å·²å­˜åœ¨ï¼Œå°†æ›´æ–°URL"
                git remote set-url origin "$repo_url"
            else
                git remote add origin "$repo_url"
            fi
            
            # æ£€æŸ¥åˆ†æ”¯
            current_branch=$(git branch --show-current)
            if [ -z "$current_branch" ]; then
                current_branch="main"
                echo "ğŸ“‹ æ­¥éª¤2: åˆ›å»ºmainåˆ†æ”¯..."
                git checkout -b main
            fi
            
            # æ¨é€ä»£ç 
            echo "ğŸ“‹ æ­¥éª¤3: æ¨é€ä»£ç åˆ°GitHub..."
            echo "ğŸ“¡ æ¨é€åˆ†æ”¯: $current_branch"
            
            # é…ç½®Gitæ¨é€è®¾ç½®
            git config --global http.postBuffer 524288000
            git config --global http.lowSpeedLimit 0
            git config --global http.lowSpeedTime 999999
            
            git push -u origin "$current_branch"
            
            echo ""
            echo "ğŸ‰ é¡¹ç›®å·²æˆåŠŸä¸Šä¼ åˆ°GitHubï¼"
            echo "ğŸŒ é¡¹ç›®åœ°å€: https://github.com/arraytechcn/$2"
            echo "ğŸ“ æœ¬åœ°ä½ç½®: $(pwd)"
            echo ""
            echo "ğŸ’¡ ç°åœ¨æ‚¨å¯ä»¥ï¼š"
            echo "   zhugit status        - æŸ¥çœ‹çŠ¶æ€"
            echo "   zhugit log          - æŸ¥çœ‹å†å²"
            echo "   zhugit commit [ä¿¡æ¯] - æäº¤æ›´æ”¹"
        fi
        ;;
    "create"|"new")
        if [ -z "$2" ]; then
            echo "âŒ è¯·æŒ‡å®šé¡¹ç›®åç§°"
            echo "ğŸ’¡ ä½¿ç”¨æ–¹æ³•: zhugit create <é¡¹ç›®åç§°>"
            echo ""
            echo "ğŸ¯ ä¸€é”®åˆ›å»ºå¹¶ä¸Šä¼ é¡¹ç›®ï¼š"
            echo "   zhugit create æˆ‘çš„é¡¹ç›®"
            echo "   # è„šæœ¬ä¼šè‡ªåŠ¨ï¼š"
            echo "   # 1ï¸âƒ£ åˆ›å»ºé¡¹ç›®ç›®å½•"
            echo "   # 2ï¸âƒ£ åˆå§‹åŒ–Git"
            echo "   # 3ï¸âƒ£ åˆ›å»ºREADMEå’Œ.gitignore"
            echo "   # 4ï¸âƒ£ æäº¤åˆå§‹ç‰ˆæœ¬"
            echo "   # 5ï¸âƒ£ æç¤ºæ‚¨åˆ›å»ºGitHubä»“åº“"
            echo "   # 6ï¸âƒ£ è¿æ¥GitHubä»“åº“"
            echo "   # 7ï¸âƒ£ æ¨é€ä»£ç "
            echo "   # 8ï¸âƒ£ æ˜¾ç¤ºé¡¹ç›®é“¾æ¥"
            echo ""
            echo "âš ï¸  æ³¨æ„ï¼šéœ€è¦å…ˆåœ¨GitHubç½‘ç«™åˆ›å»ºä»“åº“"
            echo "ğŸŒ è®¿é—®: https://github.com/new"
        else
            echo "ğŸš€ ä¸€é”®åˆ›å»ºå¹¶ä¸Šä¼ é¡¹ç›®: $2"
            echo ""
            
            # æ­¥éª¤1: æ£€æŸ¥å½“å‰ç›®å½•çŠ¶æ€
            echo "ğŸ“‹ æ­¥éª¤1: æ£€æŸ¥å½“å‰ç›®å½•çŠ¶æ€..."
            if [ -d ".git" ]; then
                echo "âš ï¸  å½“å‰ç›®å½•å·²ç»æ˜¯Gitä»“åº“"
                echo "ğŸ’¡ å»ºè®®åœ¨ä¸Šçº§ç›®å½•è¿è¡Œæ­¤å‘½ä»¤"
                echo "ğŸ“ å½“å‰ç›®å½•: $(pwd)"
                echo "ğŸ“ å»ºè®®è¿è¡Œ: cd .. && zhugit create $2"
                echo ""
                echo "â“ æ˜¯å¦ç»§ç»­åœ¨å½“å‰ç›®å½•åˆ›å»ºå­é¡¹ç›®ï¼Ÿ(y/N)"
                read -n 1 -r response
                echo ""
                if [[ ! $response =~ ^[Yy]$ ]]; then
                    echo "âŒ æ“ä½œå·²å–æ¶ˆ"
                    exit 1
                fi
            fi
            
            # æ­¥éª¤2: åˆ›å»ºé¡¹ç›®ç›®å½•
            echo "ğŸ“‹ æ­¥éª¤2: åˆ›å»ºé¡¹ç›®ç›®å½•..."
            if [ -d "$2" ]; then
                echo "âš ï¸  ç›®å½•å·²å­˜åœ¨ï¼Œå°†ä½¿ç”¨ç°æœ‰ç›®å½•"
            else
                mkdir "$2"
            fi
            cd "$2"
            
            # æ­¥éª¤2: åˆå§‹åŒ–Gitä»“åº“
            echo "ğŸ“‹ æ­¥éª¤2: åˆå§‹åŒ–Gitä»“åº“..."
            if [ -d ".git" ]; then
                echo "âš ï¸  Gitä»“åº“å·²å­˜åœ¨ï¼Œå°†é‡æ–°åˆå§‹åŒ–"
                rm -rf .git
            fi
            git init
            
            # æ­¥éª¤3: åˆ›å»ºåŸºç¡€æ–‡ä»¶
            echo "ğŸ“‹ æ­¥éª¤3: åˆ›å»ºåŸºç¡€æ–‡ä»¶..."
            echo "# $2" > README.md
            echo "# é¡¹ç›®æè¿°" >> README.md
            echo "" >> README.md
            echo "## åŠŸèƒ½ç‰¹æ€§" >> README.md
            echo "- åŠŸèƒ½1" >> README.md
            echo "- åŠŸèƒ½2" >> README.md
            echo "" >> README.md
            echo "## ä½¿ç”¨æ–¹æ³•" >> README.md
            echo "1. å…‹éš†é¡¹ç›®" >> README.md
            echo "2. è¿è¡Œé¡¹ç›®" >> README.md
            
            # åˆ›å»º.gitignore
            echo "ğŸ“‹ æ­¥éª¤4: åˆ›å»º.gitignore..."
            cat > .gitignore << 'EOF'
# ç³»ç»Ÿæ–‡ä»¶
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# ç¼–è¾‘å™¨
.vscode/
.idea/
*.swp
*.swo
*~

# æ—¥å¿—æ–‡ä»¶
*.log
logs/

# ä¾èµ–ç›®å½•
node_modules/
vendor/

# æ„å»ºè¾“å‡º
build/
dist/
target/
EOF
            
            # æ­¥éª¤5: æ·»åŠ å¹¶æäº¤
            echo "ğŸ“‹ æ­¥éª¤5: æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº..."
            git add .
            echo "ğŸ“‹ æ­¥éª¤6: æäº¤åˆå§‹ç‰ˆæœ¬..."
            git commit -m "ğŸ‰ åˆå§‹æäº¤: $2"
            
            # æ­¥éª¤6: æç¤ºç”¨æˆ·åˆ›å»ºGitHubä»“åº“
            echo "ğŸ“‹ æ­¥éª¤7: è¯·å…ˆåœ¨GitHubåˆ›å»ºä»“åº“..."
            echo "ğŸŒ è¯·è®¿é—®: https://github.com/new"
            echo "ğŸ“ ä»“åº“åç§°: $2"
            echo "ğŸ“ ä»“åº“æè¿°: $2"
            echo "ğŸ“ é€‰æ‹©: Public æˆ– Private"
            echo "âŒ ä¸è¦å‹¾é€‰: Add a README file"
            echo "âŒ ä¸è¦å‹¾é€‰: Add .gitignore"
            echo "âŒ ä¸è¦å‹¾é€‰: Choose a license"
            echo ""
            echo "â³ åˆ›å»ºå®Œæˆåï¼ŒæŒ‰ä»»æ„é”®ç»§ç»­..."
            read -n 1 -s
            
            # æ­¥éª¤7: è¿æ¥GitHubä»“åº“
            repo_url="https://github.com/arraytechcn/$2.git"
            echo "ğŸ“‹ æ­¥éª¤8: è¿æ¥GitHubä»“åº“..."
            git remote add origin "$repo_url"
            
            # æ­¥éª¤8: æ£€æŸ¥å¹¶åˆ›å»ºmainåˆ†æ”¯
            echo "ğŸ“‹ æ­¥éª¤9: æ£€æŸ¥åˆ†æ”¯çŠ¶æ€..."
            current_branch=$(git branch --show-current)
            if [ -z "$current_branch" ]; then
                echo "ğŸ“‹ åˆ›å»ºmainåˆ†æ”¯..."
                git checkout -b main
            else
                echo "ğŸ“‹ å½“å‰åˆ†æ”¯: $current_branch"
                if [ "$current_branch" != "main" ]; then
                    echo "ğŸ“‹ é‡å‘½ååˆ†æ”¯ä¸ºmain..."
                    git branch -m main
                fi
            fi
            
            # æ­¥éª¤9: é…ç½®Gitæ¨é€è®¾ç½®
            echo "ğŸ“‹ æ­¥éª¤10: é…ç½®ç½‘ç»œè®¾ç½®..."
            git config --global http.postBuffer 524288000
            git config --global http.lowSpeedLimit 0
            git config --global http.lowSpeedTime 999999
            
            # æ­¥éª¤10: æ¨é€ä»£ç 
            echo "ğŸ“‹ æ­¥éª¤11: æ¨é€ä»£ç åˆ°GitHub..."
            echo "ğŸ“¡ æ¨é€åˆ†æ”¯: main"
            
            # å°è¯•æ¨é€ï¼Œå¦‚æœå¤±è´¥åˆ™æä¾›è§£å†³æ–¹æ¡ˆ
            if ! git push -u origin main; then
                echo ""
                echo "âŒ æ¨é€å¤±è´¥ï¼Œå¯èƒ½çš„åŸå› ï¼š"
                echo "   1ï¸âƒ£ ç½‘ç»œè¿æ¥é—®é¢˜"
                echo "   2ï¸âƒ£ GitHubä»“åº“ä¸å­˜åœ¨"
                echo "   3ï¸âƒ£ è®¤è¯é—®é¢˜"
                echo ""
                echo "ğŸ’¡ è§£å†³æ–¹æ¡ˆï¼š"
                echo "   1ï¸âƒ£ æ£€æŸ¥ç½‘ç»œè¿æ¥"
                echo "   2ï¸âƒ£ ç¡®è®¤GitHubä»“åº“å·²åˆ›å»º"
                echo "   3ï¸âƒ£ æ‰‹åŠ¨æ¨é€: git push -u origin main"
                echo ""
                echo "ğŸ”§ æ‰‹åŠ¨æ¨é€å‘½ä»¤ï¼š"
                echo "   cd $(pwd)"
                echo "   git push -u origin main"
            else
                echo "âœ… æ¨é€æˆåŠŸï¼"
            fi
            
            echo ""
            echo "ğŸ‰ é¡¹ç›®åˆ›å»ºå¹¶ä¸Šä¼ å®Œæˆï¼"
            echo "ğŸŒ é¡¹ç›®åœ°å€: https://github.com/arraytechcn/$2"
            echo "ğŸ“ æœ¬åœ°ä½ç½®: $(pwd)"
            echo ""
            echo "ğŸ’¡ ç°åœ¨æ‚¨å¯ä»¥ï¼š"
            echo "   zhugit status        - æŸ¥çœ‹çŠ¶æ€"
            echo "   zhugit log          - æŸ¥çœ‹å†å²"
            echo "   zhugit commit [ä¿¡æ¯] - æäº¤æ›´æ”¹"
        fi
        ;;
    "add")
        if [ -z "$2" ]; then
            echo "ğŸ“ æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº..."
            git add .
        else
            echo "ğŸ“ æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº: $2"
            git add "$2"
        fi
        echo "âœ… æ–‡ä»¶å·²æ·»åŠ åˆ°æš‚å­˜åŒº"
        ;;
    "checkout"|"co")
        echo "ğŸ“¥ æ£€å‡ºé¡¹ç›®..."
        git checkout "$2"
        ;;
    "update"|"up")
        echo "ğŸ”„ æ›´æ–°é¡¹ç›®..."
        git pull local main
        ;;
    "commit"|"ci")
        echo "ğŸ’¾ æäº¤æ›´æ”¹..."
        git add .
        git commit -m "$2"
        git push local main
        echo "âœ… æäº¤å®Œæˆï¼"
        ;;
    "status"|"st")
        echo "ğŸ“Š é¡¹ç›®çŠ¶æ€:"
        git status --short
        ;;
    "log"|"history")
        echo "ğŸ“ˆ æäº¤å†å²:"
        git log --oneline -10
        ;;
    "revert")
        echo "â†©ï¸ æ¢å¤æ›´æ”¹..."
        git checkout -- "$2"
        ;;
    "rollback"|"rb")
        if [ -z "$2" ]; then
            echo "âŒ è¯·æŒ‡å®šè¦å›æ»šåˆ°çš„æäº¤ID"
            echo "ğŸ’¡ ä½¿ç”¨æ–¹æ³•: zhugit rollback <æäº¤ID>"
            echo "ğŸ“‹ æŸ¥çœ‹å¯ç”¨æäº¤: zhugit log"
        else
            echo "ğŸ”„ å›æ»šåˆ°æäº¤: $2"
            echo "âš ï¸  æ³¨æ„ï¼šè¿™å°†åˆ é™¤åç»­çš„æäº¤å†å²"
            echo "ğŸ’¡ å¦‚éœ€ä¿ç•™å†å²ï¼Œè¯·ä½¿ç”¨: zhugit rollback-to <æäº¤ID>"
            git reset --hard "$2"
            echo "âœ… å›æ»šå®Œæˆï¼"
        fi
        ;;
    "rollback-soft"|"rbs")
        if [ -z "$2" ]; then
            echo "âŒ è¯·æŒ‡å®šè¦å›æ»šåˆ°çš„æäº¤ID"
            echo "ğŸ’¡ ä½¿ç”¨æ–¹æ³•: zhugit rollback-soft <æäº¤ID>"
            echo "ğŸ“‹ æŸ¥çœ‹å¯ç”¨æäº¤: zhugit log"
        else
            echo "ğŸ”„ è½¯å›æ»šåˆ°æäº¤: $2 (ä¿ç•™æ›´æ”¹)"
            git reset --soft "$2"
            echo "âœ… è½¯å›æ»šå®Œæˆï¼æ›´æ”¹å·²ä¿ç•™åœ¨æš‚å­˜åŒº"
        fi
        ;;
    "rollback-to"|"rbt")
        if [ -z "$2" ]; then
            echo "âŒ è¯·æŒ‡å®šè¦å›æ»šåˆ°çš„æäº¤ID"
            echo "ğŸ’¡ ä½¿ç”¨æ–¹æ³•: zhugit rollback-to <æäº¤ID>"
            echo "ğŸ“‹ æŸ¥çœ‹å¯ç”¨æäº¤: zhugit log"
        else
            echo "ğŸ”„ å®‰å…¨å›æ»šåˆ°æäº¤: $2 (ä¿ç•™å†å²è®°å½•)"
            echo "ğŸ“ è¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„å›æ»šæäº¤ï¼Œä¿ç•™æ‰€æœ‰å†å²"
            
            # è·å–å½“å‰HEADçš„æäº¤ä¿¡æ¯
            current_commit=$(git rev-parse HEAD)
            current_message=$(git log --format=%s -1)
            
            # é‡ç½®åˆ°ç›®æ ‡æäº¤
            git reset --hard "$2"
            
            # åˆ›å»ºå›æ»šæäº¤
            git commit --allow-empty -m "ğŸ”„ å›æ»šåˆ°: $2
åŸæäº¤: $current_commit
åŸä¿¡æ¯: $current_message
æ—¶é—´: $(date '+%Y-%m-%d %H:%M:%S')"
            
            echo "âœ… å®‰å…¨å›æ»šå®Œæˆï¼å†å²è®°å½•å·²ä¿ç•™"
            echo "ğŸ“Š æ–°çš„å›æ»šæäº¤å·²åˆ›å»º"
        fi
        ;;
    "diff")
        echo "ğŸ” æŸ¥çœ‹å·®å¼‚:"
        git diff
        ;;
    "help"|*)
        echo "ğŸš€ ZhuGit - æœ±æ°Gitæ“ä½œå·¥å…·:"
        echo ""
        echo "ğŸ¯ è¶…çº§ç®€å•ç”¨æ³• (æ¨è):"
        echo "  zhugit create [é¡¹ç›®å]      - ä¸€é”®åˆ›å»ºå¹¶ä¸Šä¼ é¡¹ç›®"
        echo "  zhugit quick-setup [é¡¹ç›®å] - ä¸€é”®åˆ›å»ºé¡¹ç›®"
        echo "  zhugit auto-upload [é¡¹ç›®å]  - ä¸€é”®ä¸Šä¼ åˆ°GitHub"
        echo ""
        echo "ğŸ“‹ åŸºç¡€æ“ä½œ:"
        echo "  zhugit init            - åˆå§‹åŒ–Gitä»“åº“"
        echo "  zhugit add [æ–‡ä»¶]      - æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº"
        echo "  zhugit commit [ä¿¡æ¯]    - æäº¤æ›´æ”¹"
        echo "  zhugit status          - æŸ¥çœ‹çŠ¶æ€"
        echo "  zhugit log             - æŸ¥çœ‹å†å²"
        echo ""
        echo "ğŸ”— GitHubæ“ä½œ:"
        echo "  zhugit connect-github [URL] - è¿æ¥åˆ°GitHubä»“åº“"
        echo "  zhugit new-project [åç§°]   - åˆ›å»ºæ–°é¡¹ç›®"
        echo ""
        echo "ğŸ”„ é«˜çº§æ“ä½œ:"
        echo "  zhugit checkout [åˆ†æ”¯]     - æ£€å‡ºåˆ†æ”¯"
        echo "  zhugit update               - æ›´æ–°é¡¹ç›®"
        echo "  zhugit revert [æ–‡ä»¶]        - æ¢å¤æ–‡ä»¶"
        echo "  zhugit rollback [ID]        - ç¡¬å›æ»šåˆ°æŒ‡å®šæäº¤"
        echo "  zhugit rollback-soft [ID]   - è½¯å›æ»š(ä¿ç•™æ›´æ”¹)"
        echo "  zhugit rollback-to [ID]     - åˆ›å»ºå›æ»šæäº¤"
        echo "  zhugit diff                 - æŸ¥çœ‹å·®å¼‚"
        echo ""
        echo "ğŸ’¡ æœ€å¸¸ç”¨å‘½ä»¤ï¼š"
        echo "   zhugit create æˆ‘çš„é¡¹ç›®"
        echo "   zhugit status"
        echo "   zhugit commit 'æ›´æ–°åŠŸèƒ½'"
        ;;
esac
